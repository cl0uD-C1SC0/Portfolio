Building an automated pipeline with IAM Access Analyzer:

Create repository (CodeCommit)

In Cloud9 digit:

git config --global init.defaultBranch main

Clone repo of CodeCommit

git clone https://git-codecommit.us-east-1.amazonaws.com/v1/repos/repositoryname

Commit a file to initialze your main branch

cd repositoryname

echo "# My Cloudformation Temapltes" > README.md

git add --all

git commit -m "Initial commit, seeding repository"

git push

Crie um CodeBuild
Quando chegar na parte do Use a buildspec file > selecione: Insert build commands

version: 0.2
phases:
    install: 
        commands:
        - pip3 install cfn-policy-validator
    build:
        commands:
        - cfn-policy-validator validate --template-path template.json --region us-east-1 --template-configuration-file template-configuration.json


Crie outro CodeBuild Project:

Na parte de usar um Buildspec file selecione > Insert build commands:

version: 0.2
phases:
  install: 
    commands:
      - pip3 install cfn-lint
  build:
    commands:
      - cfn-lint template.json


GARANTA AS PERMISSÕES PARA O CNF-POLICY-VALIDATOR TOOL
PARA FAZER CHAMADAS PARA O ACCESS ANALYZER

WORKSHOP:
https://catalog.us-east-1.prod.workshops.aws/v2/workshops/fff8e490-f397-43d2-ae26-737a6dc4ac68/en-US/





