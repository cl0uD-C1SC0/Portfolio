IAM Policy Validator for AWS CloudFormation:

CNF-POLICY-VALIDATOR É UMA FERRAMENTA QUE VALIDA OS TEMPLATES DO CLOUDFORMATION

INSTALLATION:

sudo pip3 install cfn-policy-validator
cfn-policy-validator --version

mkdir cnf-policy-validator
cat << EOF > cfn-policy-validator/parse-template.json
{
    "Resources": {
        "MyQueue": {
            "Type": "AWS::SQS::Queue"
        },
        "MyQueuePolicy": {
            "Type": "AWS::SQS::QueuePolicy",
            "Properties": {
                "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement":[{
                        "Action": ["sqs:SendMessage", "sqs:ReceiveMessages"],
                        "Effect": "Allow",
                        "Resource": { "Fn::GetAtt": ["MyQueue", "Arn"] },
                        "Principal": {
                            "AWS": {
                                "Fn::Sub": "arn:aws:iam::\${AWS::AccountId}:root"
                            }
                        }
                    }]
                },
                "Queues": [
                    { "Ref": "MyQueue" }
                ]
            }
        }
    }
}
EOF

cfn-policy-validator parse --template-path cfn-policy-validator/parse-template.json --region us-east-1


EVALUATING CLOUDFORMATION INTRINSIC FUNCTIONS AND PSEUDO PARAMETERS

O Valor do Resource no template do cloudformation é:

"Resource": {"Fn::GetAtt": ["MyQueue", "Arn"] },

Depois que você utilizou o comando do cnf-policy-validator (parse) o Valor ficou para:

"Resource": "arn:aws:sqs:us-east-1:accountID:MyQueue
