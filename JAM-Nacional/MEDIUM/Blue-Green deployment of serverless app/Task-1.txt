#
# 
#

STEP 1:

- Abra o AWS Lambda Console
- Selecione a função lambda: GreetingLambda
- Replace greeting string de "Hello" para "Hi" no código fonte
- Deploy, e espere pelo Deploy completo.
- Clique em Test
    * Se você usar "Hello World" test event como referencia:
        Event Name: GreetingTestEvent)
        Event Template Json: {"name": "awsstudent"} (delete the default template)
        Clique em create e test.

(ESSE STEP É MUITO PERIGOSO, PORTANTO CUIDADO!)
STEP 2:

- No Lambda Console, clique em versões
- Publique uma nova versão
- Descrição "version 2"
- Volte para a função Lambda do STEP 1 e note que tem várias versões da sua função Lambda
- Note dois alises Lambda (staging and pro) referente a versão 1
- Mude o staging alias para versão 2 (staging alias to point to version 2)
- Volte para a função lambda na página principal.
- Clique em Aliases
    - Selecione staging alias clicando no correspondente radio button e clique em Edit
    - Atualiza a versão do Lambda no staging alias para versão 2 e clique em Salvar.
    - Agora clique no alias name (should be a clickable link)
    - Clique em Test para rodar a função Lambda
    - Expanda o execution logs e depois clique em detalhes.
    - Agora faça o mesmo procedimento clicando em prod alias (Verifique se o output produzido é diferente)
        Output prod alis: {"greeting": "Hello, awsstudent!"}

STEP 3:
-  Navegue até o console do API Gateway
- Selecione API de greeting
- Clique no rótulo do método "GET" em "/greetings" Função API.
- Clique em "Solicitação de Integração" (Integration Request algo assim)
- Parametro Lambda Function. 
- No campo Função do Lambda (Lambda Function) digite (Diversas Opções):
    1- GreetingLambda: $ {StageVariables.Environment}
    2- "GreetingLambda: $ {StageVariables.Environment}"
    3- GreetingLambda:${stageVariables.environment}
    4- GreetingLambda:${StageVariables.Environment}
    5- "GreetingLambda:${StageVariables.Environment}"
    6- "GreetingLambda:${StageVariables.Environment}"

- Salve a alteração e reimplante a API em cada estágio clidando no rótulo da API de greeting
    - Actions
    - Implantar API (Implant API algo assim)
    - Escolha "test" API, e em seguida repita o processo para o estágio de API "prod"
    - Acerte seus endpoints de API de produção e preparação mais uma vez a partir do seu navegador
    - Você verá resultados diferentes agora! 
    - Use seu navegador para abrir a URL indicada pelo output parameter (CheckChallengeAnswerUrl)
